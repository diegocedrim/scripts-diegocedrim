{
    "assignee": null, 
    "assignees": [], 
    "body": "A non-master data node can successfully join a cluster, but fails on index creation.\nA non-data master is unable to store state between restarts.\n\nThe local gateway init seems to have a bug here:\ngateway/local/LocalGateway.java: lazyInitialize():\n        if (!clusterService.localNode().masterNode() || !clusterService.localNode().dataNode())\n==>\n        if (!clusterService.localNode().masterNode() &&!clusterService.localNode().dataNode()) \n\nThe second change involves more settings, and I am unsure what other implications it may have (and if things need to change elsewhere).  But at least this if statement cause problems:\n\nenv/NodeEnvironment.java: NodeEnvironment constructor:\nif (!settings.getAsBoolean(\"node.data\", true) || settings.getAsBoolean(\"node.client\", false) ||\n !settings.getAsBoolean(\"node.master\", true)) {  \n\nShould this just be  if(settings.getAsBoolean(\"node.client\", false))  instead  ?\n", 
    "closed_at": "2010-12-30T10:10:54Z", 
    "closed_by": null, 
    "comments": 2, 
    "comments_url": "https://api.github.com/repos/elastic/elasticsearch/issues/579/comments", 
    "created_at": "2010-12-30T03:29:34Z", 
    "events_url": "https://api.github.com/repos/elastic/elasticsearch/issues/579/events", 
    "html_url": "https://github.com/elastic/elasticsearch/issues/579", 
    "id": 498235, 
    "labels": [
        {
            "color": "9e2c2c", 
            "default": true, 
            "id": 23173, 
            "name": "bug", 
            "url": "https://api.github.com/repos/elastic/elasticsearch/labels/bug"
        }, 
        {
            "color": "DDDDDD", 
            "default": false, 
            "id": 66466, 
            "name": "v0.14.2", 
            "url": "https://api.github.com/repos/elastic/elasticsearch/labels/v0.14.2"
        }, 
        {
            "color": "ededed", 
            "default": false, 
            "id": 65354, 
            "name": "v0.15.0", 
            "url": "https://api.github.com/repos/elastic/elasticsearch/labels/v0.15.0"
        }
    ], 
    "labels_url": "https://api.github.com/repos/elastic/elasticsearch/issues/579/labels{/name}", 
    "locked": false, 
    "milestone": null, 
    "number": 579, 
    "repository_url": "https://api.github.com/repos/elastic/elasticsearch", 
    "state": "closed", 
    "title": "Non-data master nodes and non-master data nodes fail to store data", 
    "updated_at": "2010-12-30T10:10:54Z", 
    "url": "https://api.github.com/repos/elastic/elasticsearch/issues/579", 
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/540617?v=3", 
        "events_url": "https://api.github.com/users/theborg/events{/privacy}", 
        "followers_url": "https://api.github.com/users/theborg/followers", 
        "following_url": "https://api.github.com/users/theborg/following{/other_user}", 
        "gists_url": "https://api.github.com/users/theborg/gists{/gist_id}", 
        "gravatar_id": "", 
        "html_url": "https://github.com/theborg", 
        "id": 540617, 
        "login": "theborg", 
        "organizations_url": "https://api.github.com/users/theborg/orgs", 
        "received_events_url": "https://api.github.com/users/theborg/received_events", 
        "repos_url": "https://api.github.com/users/theborg/repos", 
        "site_admin": false, 
        "starred_url": "https://api.github.com/users/theborg/starred{/owner}{/repo}", 
        "subscriptions_url": "https://api.github.com/users/theborg/subscriptions", 
        "type": "User", 
        "url": "https://api.github.com/users/theborg"
    }
}