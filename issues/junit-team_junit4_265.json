{
    "assignee": null, 
    "assignees": [], 
    "body": "When trying to write a custom Rule for repeating execution of a test I found that once a statement passed the evaluate method call it will continue to do so regardless of the actual test result.\n\nThis only happens when a timeout value is set on the test. for instance say I have an annotation called @Repeat(int reps)\n\nI use it for annotating a method like so:\n\n``` java\nprivate static int count = 0;\n@Rule public RepeatRule = new RepeatRule();\n\n@Test(timeout = 1000)\n@Repeat(reps = 2)\npublic void testFailOnSecondRun() {\n      count++;\n      if (count == 2)\n          fail(\"I failed\");\n}\n```\n\nExpected behavior would be that the above test fails, however, it passes the test.\nThe reason being that the timeout value causes the statement to be decorated with a FailOnTimeout statement which has the following code:\n\n``` java\n...\nprivate boolean fFinished= false;\n...\n\n@Override\npublic void evaluate() throws Throwable {\n  Thread thread= new Thread() {\n    @Override\n    public void run() {\n      try {\n        fNext.evaluate();\n        fFinished= true;\n      } catch (Throwable e) {\n        fThrown= e;\n      }\n    }\n};\nthread.start();\nthread.join(fTimeout);\nif (fFinished)\n  return;\n...\n```\n\nAs can be seen _fFinished_ is declared outside the **evaluate()** method and therefore once set to true once. all subsequent calls to evalute() will pass regardless of the exception thrown by the test itself.\n\nA simple fix would be to move the **_fFinished_ = false** to the start of the **evaluate()** method.\n", 
    "closed_at": "2011-08-11T14:06:37Z", 
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/46155?v=3", 
        "events_url": "https://api.github.com/users/dsaff/events{/privacy}", 
        "followers_url": "https://api.github.com/users/dsaff/followers", 
        "following_url": "https://api.github.com/users/dsaff/following{/other_user}", 
        "gists_url": "https://api.github.com/users/dsaff/gists{/gist_id}", 
        "gravatar_id": "", 
        "html_url": "https://github.com/dsaff", 
        "id": 46155, 
        "login": "dsaff", 
        "organizations_url": "https://api.github.com/users/dsaff/orgs", 
        "received_events_url": "https://api.github.com/users/dsaff/received_events", 
        "repos_url": "https://api.github.com/users/dsaff/repos", 
        "site_admin": false, 
        "starred_url": "https://api.github.com/users/dsaff/starred{/owner}{/repo}", 
        "subscriptions_url": "https://api.github.com/users/dsaff/subscriptions", 
        "type": "User", 
        "url": "https://api.github.com/users/dsaff"
    }, 
    "comments": 2, 
    "comments_url": "https://api.github.com/repos/junit-team/junit4/issues/265/comments", 
    "created_at": "2011-07-20T05:34:48Z", 
    "events_url": "https://api.github.com/repos/junit-team/junit4/issues/265/events", 
    "html_url": "https://github.com/junit-team/junit4/issues/265", 
    "id": 1254365, 
    "labels": [], 
    "labels_url": "https://api.github.com/repos/junit-team/junit4/issues/265/labels{/name}", 
    "locked": false, 
    "milestone": null, 
    "number": 265, 
    "repository_url": "https://api.github.com/repos/junit-team/junit4", 
    "state": "closed", 
    "title": "FailOnTimeout Statement remembers successful run. prevents statement reuse", 
    "updated_at": "2011-08-11T14:06:38Z", 
    "url": "https://api.github.com/repos/junit-team/junit4/issues/265", 
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/926978?v=3", 
        "events_url": "https://api.github.com/users/asafary/events{/privacy}", 
        "followers_url": "https://api.github.com/users/asafary/followers", 
        "following_url": "https://api.github.com/users/asafary/following{/other_user}", 
        "gists_url": "https://api.github.com/users/asafary/gists{/gist_id}", 
        "gravatar_id": "", 
        "html_url": "https://github.com/asafary", 
        "id": 926978, 
        "login": "asafary", 
        "organizations_url": "https://api.github.com/users/asafary/orgs", 
        "received_events_url": "https://api.github.com/users/asafary/received_events", 
        "repos_url": "https://api.github.com/users/asafary/repos", 
        "site_admin": false, 
        "starred_url": "https://api.github.com/users/asafary/starred{/owner}{/repo}", 
        "subscriptions_url": "https://api.github.com/users/asafary/subscriptions", 
        "type": "User", 
        "url": "https://api.github.com/users/asafary"
    }
}